<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8"/>
		<meta name="og:site_name" content="hawken.is"/>
		<link rel="canonical" href="https://www.hawken.is/writing/sql-case-expressions"/>
		<meta name="twitter:url" content="https://www.hawken.is/writing/sql-case-expressions"/>
		<meta name="og:url" content="https://www.hawken.is/writing/sql-case-expressions"/>
		<title>SQL peculiarities in db2/AS400 (part 1) | hawken.is</title>
		<meta name="twitter:title" content="SQL peculiarities in db2/AS400 (part 1) | hawken.is"/>
		<meta name="og:title" content="SQL peculiarities in db2/AS400 (part 1) | hawken.is"/>
		<meta name="description" content="My website!"/>
		<meta name="twitter:description" content="My website!"/>
		<meta name="og:description" content="My website!"/>
		<meta name="twitter:card" content="summary"/>
		<link rel="stylesheet" href="/styles.css" type="text/css"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<link rel="shortcut icon" href="/images/favicon.png" type="image/png"/>
		<link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to hawken.is"/>
	</head>
	<body class="item-page">
		<header>
			<div class="wrapper">
				<a class="site-name" href="/">hawken.is</a>
				<nav>
					<ul>
						<li>
							<a href="/cooking">Cooking</a>
						</li>
						<li>
							<a href="/learning">Learning</a>
						</li>
						<li>
							<a href="/listening">Listening</a>
						</li>
						<li>
							<a href="/making">Making</a>
						</li>
						<li>
							<a href="/reading">Reading</a>
						</li>
						<li>
							<a href="/researching">Researching</a>
						</li>
						<li>
							<a class="selected" href="/writing">Writing</a>
						</li>
					</ul>
				</nav>
			</div>
		</header>
		<div class="wrapper">
			<article>
				<div class="content"><h1>SQL peculiarities in db2/AS400 (part 1)</h1><p>SQL's <code>CASE</code> expression. Turns out that it's an expression, not a statement, soâ€¦ it's supposed to only be allowed in expression contexts, IE the right-hand side of stuff.</p><pre><code class="language-SQL">WHERE 1 = CASE :student_id WHEN '123' THEN 1 ELSE 0 END
</code></pre><p>Postgres allows you to do something like the following:</p><pre><code class="language-SQL">WHERE CASE :student_id WHEN '123' THEN 1 = 1 ELSE 0 = 1 END
</code></pre><p>that is, the entire CASE can evaluate to a boolean value, not just a single value, which db2 requires.</p><p>TODO: document the occasional <code>CAST(? as varchar(100))</code> block required by db2.</p></div>
				<span>Tagged with: </span>
				<ul class="tag-list">
					<li>
						<a href="/tags/sql">sql</a>
					</li>
					<li>
						<a href="/tags/ibmi">ibm-i</a>
					</li>
					<li>
						<a href="/tags/as400">as400</a>
					</li>
					<li>
						<a href="/tags/db2">db2</a>
					</li>
				</ul>
			</article>
		</div>
		<footer>
			<p>Generated using 
				<a href="https://github.com/johnsundell/publish">Publish</a>
			</p>
			<p>
				<a href="/feed.rss">RSS feed</a>
			</p>
		</footer>
	</body>
</html>